#
# This file is generated by Chef
# Do not edit, changes will be overwritten
#
<LoadPlugin "<%= @name %>">
  Globals true
</LoadPlugin>

<% if not @config.empty? %>
<Plugin "<%= @name %>">

  # Customized modules written by DonorsChoose.org are kept as
  # /var/chef-solo/cookbooks/collectd/files/default/*.py scripts,
  # and installed into /opt/collectd/lib/colletd/python.
  ModulePath "/opt/collectd/lib/collectd/<%= @name %>"
  <% @config.sort.map do |plugin, params| %>
  Import "<%= plugin %>"
  <% end %>

  # Customized modules are configured by name-value attributes in
  # /var/chef-solo/roles/*.rb files for virtual machine configuration
  # (i.e., not the *-blueprint.rb files).
  <% @config.sort.map do |plugin, params| %>
  <Module "<%= plugin %>">
    <% params.sort.map do |key, value|
      if value.is_a? Array
        value.each do |subvalue| %>
    <%= key %> <%= collectd_option(subvalue) %>
    <% end else %>
    <%= key %> <%= collectd_option(value) %>
    <% end end %>
  </Module>
  <% end %>

</Plugin>

<% end %>
